The Hybrid Identity Authentication

Azure AD Connect
  Pre-requisites
    Forest functional level 2003 or higher
    Writable domain controllers
    Win Server 2008 or later
    Ports required: outboud 80/443/5671
    SQL express is used
    Azure AD premium required for Writeback(password, group, connecthealth, etc)
    Based on the Sync object count there is requirement for harddrive size or sql server full edition
    
  Options
    Mulit-Forest Topologies
     SQL Server
     Sync Filtering
     Staging Mode - stand by server for failover
     Sign in - Passthrough/Federation
     Writeback(password, group, connecthealth, etc)
     Customer attribures

SignIn Methods (https://docs.microsoft.com/en-gb/azure/active-directory/hybrid/choose-ad-authn#decision-tree)
Cloud Authentication                          
  Cloud Only
    only cloud identites, auth is handled compeletly on cluod                                      
  Password Hash Synchronization (PHS) +  Seamless SSO
    Handled on cloud 
    Schuduled to Sync passwords from on-prem to Azure AD
    password hash synchronization process runs every 2 minutes (MD5)
    No requirement for on-prem AD level secuirty policeis
    No sign in requirement not natively supported by Azure AD
    Leaked credentials report on dark web
  Pass-through Authentication (PTA) + Seamless SSO
    Agents are installed - no management, agent makes only outbound calls to the queue (pub-sub model), 
    password requests are put in a queue 
    Enforce on-prem AD level security policies
    Use + Password Hash sync for Leaked credentials report on dark web
Federated Authentication
  ADFS
  Customer Providers
    For Federarion Service
    Deploy ADFS proxies on Perimeter

Seamless signon
  Setup 
    Azure AD Connect -> Customize -> -> Enable Single Sign-on
    Automatically Creates a computer account(AZUREADSSOACC) for getting Kerberos ticket
    Enable group policy site-to-zone URL
    If doesnt work, it will fall back to asking username password
    User tries to acccess a WebApp -> Redirect Azure AD signin page -> Kerberos service principal names (SPNs) are created to be used during the Azure AD sign-in process
    -> Gets a Kerberos ticket from onprem AD -> ticket forwarded to Azure AD -> Azure AD Decryptes with already know Kerberos Decryption Key
    -> Complete Signin process -> Uses signin to the app
SSO/MFA works on all the above.

Which one to choose?
  
